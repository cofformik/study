P8255A EQU 0640H
P8255B EQU 0642H
P8255C EQU 0646H
P8255MODE EQU 0646H
CODE SEGMENT
		ASSUME CS:CODE
START:
		MOV DX,P8255MODE
		MOV AL,10010000B		;90H
		OUT DX,AL				;送方式控制字
		
NEXT:
		MOV DX,P8255A
		IN  AL,DX				;读a口
		ADD AL,1
		JZ  A1					;开关K7~K0均为高电平，程序退出
		SUB AL,1
		MOV DX,P8255B
		OUT DX,AL				;送b口
		JMP NEXT

				
OVER:	MOV AL,00H
		MOV DX,P8255B
		OUT DX,AL				;送b口
		MOV AH,4CH
		INT 21H
A1:		MOV AL,0FFH
		MOV DX,P8255B
		OUT DX,AL				;送b口
		MOV AX,0FFFFH			;延时
		SUB AX,1
		JZ  OVER

CODE ENDS
		END START